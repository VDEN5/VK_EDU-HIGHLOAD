# Почтовый сервис Mail.ru

## Содержание
- [Тема, целевая аудитория и MVP](#тема-целевая-аудитория-и-mvp)
  - [Тема](#тема)
  - [MVP](#mvp)
  - [Сведения](#сведения)
- [Продуктовые показатели](#продуктовые-показатели)
- [Расчет нагрузки](#расчет-нагрузки)
- [Объем хранилищ](#объем-хранилищ)
- [Список источников](#список-источников)

## Тема, целевая аудитория и MVP

### Тема 
Mail.ru - сервис для отправки электронных писем

### MVP
Функционал:
1) отправка письма
2) просмотр письма
3) удаление письма
4) создание избранных писем
5) поиск писем (в том числе и по параметрам)
6) создание папок

### Сведения
1) 49M MAU [1]
2) 16,2M DAU [2]
3) 20 000 000 писем отправляются в день [3]
4) 37% респондентов проверяют почту несколько раз в сутки, у 22% она всегда открыта в течение дня. 20% - раз в день, 11% – раз в неделю. 7% - крайне редко, а 3% - очень давно [4]
5) 50 пб - хранилище mail.ru. Из них 15 пб - письма, 35 пб - вложения (файлы) [2]
6) 8 гб - бесплатный размер хранилища писем mail.ru [5]
7) Средний вес письма без вложения 75 кб [6]
8) Максимальный размер вложений 25 мб [6]
9) 100 млн активных пользователей [7]
10) По данным специалистов Почты Mail.Ru около 50% всех писем в Мобильной Почте Mail.Ru отправляются с вложениями. В каждом пятом письме — два и более прикрепленных файла. Примерно в 80% случаях — это фотографии, 19% — документы, 1% приходится на видеоролики и архивы [8]

## Аудитория
Распределение трафика по странам [9]

| Процент | Страна |
| ------- | ------ |
| 90 % | Россия |
| 4 % | Казахстан |
| 4 % | Белоруссия |
| 1 % | Азербайджан |
| 1 % | Европа |

## Продуктовые показатели
| Название | Показатель | Расчет |
| -------- | ---------- | ------ |
| MAU | 49 млн/месяц | из данных |
| DAU | 17 млн/день | из данных |
| Отправка писем | 20 млн/день | из данных |
| Получение писем | 500 тыс/мин | из данных |
| Письмо без вложения | 75 кб | из данных |
| Письмо с вложением | 1125 кб | Из данных: фотографии: 80% (2000 кб), документы: 19% (500 кб), видеоролики и архивы: 1% (10000 кб) <br> Средний вес вложения = (0.8×2000) + (0.19×500) + (0.01×10000) = 1795 кб <br> 80% писем с вложениями содержат один файл 1795 кб + 75 кб = 1870 кб <br> 20% писем с вложениями содержат два и более файла (возьмем 2): 2×1795 кб + 75 кб = 3665 кб <br> Средний вес с вложением = (0.8×1870) + (0.2×3665) = 2229 кб <br> Средний вес = (0.5×75) + (0.5×2229) = 1152 кб |
| Хранилище | 0,5 гб/пользователь | 50 млн MAU - количество хранилищ. 50 пб / 100 млн пользователей = 0,52 гб |
| Проверка почты | 3.5 раз/день | Пусть 37% — проверяют почту 3 раза в сутки, 22% — 200 раз, 20% — 1 раз, 11% — 0.14, 7% — 0.01, 3% — 0. <br> Тогда среднее число проверок в день = (0.37×3) + (0.22×200) + (0.20×1) + (0.11×0.14) + (0.07×0.01) + (0.03×0) = 45.3254 |
| Пользователи | 100 млн | В источнике указаны активные пользователи. ПУсть это и будет нашим числом пользователей |

## Расчет нагрузки
| Запрос | RPS | Расчет RPS | Traffic | Расчет трафика |
| ------ | --- | ---------- | ------- | -------------- |
| Создание и отправка письма | 231 | Отправка писем / 86400 = 20 млн / 86400 | 2034 мбит/с | Отправка писем * Письмо / 86400 = 20 млн * 1125 кб / 86400 |
| Просмотр страницы писем | 689 | Проверка почты * DAU / 86400 = 3.5 * 17 млн / 86400 | 20175 мбит/с | Предположим, что при проверке почты открываются входящие на 1 странице (50 писем). Для отображения входящих не требуются вложения, поэтому вес одного письма базовый без вложений <br> Проверка почты * DAU * 50 * Письмо без вложения / 86400 = 3.5 * 17 млн * 50 * 75 / 86400 |
| Просмотр письма с вложениями | 2065 | Предположим, что при проверке почты пользователь открывает 3 письма с вложениями, скачивая их. <br> 3 * Проверка почты * DAU / 86400 = 3 * 3.5 * 17 млн / 86400 | 18157 мбит/с | Скачивание 3 писем <br> 3 * Проверка почты * DAU * Письмо с вложением / 86400 = 3 * 3.5 * 17 млн * 1125 кб / 86400 |
| Сохранение в избранное | 20 | Пусть в избранное добавляется 1% от всех просматриваемых писем. <br> (Просмотр писем * 1%) / 86400 = (2065 RPS * 86400 * 0.01) / 86400 = 20.65 | 1 мбит/с | Пусть вес запроса — это просто флаг "добавить в избранное" <br> RPS * Вес запроса = 20 * 0.5 Кб * 8 ≈ 80 кбит/с |
| Поисковые запросы | 590 | 3 поисковых запроса на пользователя в день <br> (17 млн DAU * 3) / 86400 ≈ 590 | 88 мбит/с | Вес запроса - строка поиска (0.2 Кб). Вес ответа - заголовки 50 найденных писем (50 * 2 Кб = 100 Кб). Общий вес операции = 100 Кб <br> RPS * Вес операции * 8 = 590 * 100 Кб * 8 = 590 * 0.8 мбит/с ≈ 472 мбит/с |

## Объем хранилищ
| Тип | Объем | Расчет |
| --- | ----- | ------ |
| Письма | 15 пб | Из данных |
| Вложения | 35 пб | Из данных |
| Личная информация | 96 тб | Личная информация - данные (ФИО, пароль, техническая информация, почта) 10 кб + аватарка 1 мб = 1034 кб <br> Пользователи * 1034 кб = 100 млн * 1034 кб |

## Список источников
1) [Годовой отчет VK Group](https://corp.vkcdn.ru/media/files/VK_AR2023_RUS_06.06_3KIGigO.pdf)
2) [Квартальный отчет VK Group](https://corp.vkcdn.ru/media/files/RUS_Press_Release_9M_2024.pdf)
3) [Регистрация](https://new.mail.ru/?ysclid=m798h0dap763791521)
4) [Исследование](https://news.rambler.ru/internet/47307976-issledovanie-rambler-co-65-rossiyskih-polzovateley-proveryayut-elektronnuyu-pochtu-s-noutbuka-ili-kompyutera/?ysclid=m7j44cvhnp258702465)
5) [Тарифы](https://help.mail.ru/cloud_web/size/tariffs/)
6) [Статистика](https://www.emailtooltester.com/en/blog/email-usage-statistics/)
7) [Анализ рынка](https://investim.guru/obzory/auditorii-osnovnyh-pochtovyh-servisov-v-rossii-statistika-i-analitika?utm_referrer=https%3A%2F%2Fya.ru%2F)
8) [Новость](https://hi-tech.mail.ru/news/123435-rossiyan-predupredili-o-neochevidnoj-ulovke-v-elektronnyh-pismah/?from=swap&swap=2)
9) [Трафик](https://www.similarweb.com/ru/website/mail.ru/)
